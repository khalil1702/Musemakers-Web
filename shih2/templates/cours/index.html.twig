{% extends 'base2.html.twig' %}

{% block title %}Cours index{% endblock %}

{% block body %}
    <h1>Cours index</h1>
   
    <table class="table">
        <thead>
            <tr>
                <th>IdCours</th>
                <th>TitreCours</th>
                <th>DescriCours</th>
                <th>DatedebutCours</th>
                <th>DatefinCours</th>
                <th>actions</th>
            </tr>
        </thead>
        <tbody>
        {% for cour in cours %}
            <tr>
                <td>{{ cour.idCours }}</td>
                <td>{{ cour.titreCours }}</td>
                <td>{{ cour.descriCours }}</td>
                <td>{{ cour.datedebutCours ? cour.datedebutCours|date('Y-m-d') : '' }}</td>
                <td>{{ cour.datefinCours ? cour.datefinCours|date('Y-m-d') : '' }}</td>
                <td>
                    <a href="{{ path('app_cours_show', {'idCours': cour.idCours}) }}" class="btn btn-info">show</a>
<a href="{{ path('app_cours_edit', {'idCours': cour.idCours}) }}" class="btn btn-primary">edit</a>

                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="6">no records found</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
 
<form action="{{ path('app_cours_index') }}" method="GET" style="margin-bottom: 20px;">
    <input type="text" name="search" value="{{ searchTerm }}" placeholder="Rechercher..." style="padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
    <select name="sort_by" style="padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
        <option value="default_field">Par défaut</option>
        <option value="titreCours">Titre</option>
        <option value="datedebutCours">Date de début</option>
        <option value="datefinCours">Date de fin</option>
    </select>
    <button type="submit" style="padding: 8px 12px; background-color: #007bff; color: #fff; border: none; border-radius: 4px; cursor: pointer;">Rechercher</button>
</form>



{% for cour in cours %}
    {# Afficher les détails du cours #}
{% endfor %}

<form id="searchForm" action="{{ path('app_cours_index') }}" method="GET">
    <input type="text" id="searchInput" name="search" placeholder="Rechercher...">
</form>

<div id="searchResults"></div>

<script>
    document.getElementById('searchInput').addEventListener('input', function() {
        var searchTerm = this.value;
        var form = document.getElementById('searchForm');
        var formData = new FormData(form);

        fetch(form.action + '?search=' + searchTerm, {
            method: 'GET',
            headers: {
                'X-Requested-With': 'XMLHttpRequest'
            }
        })
        .then(response => response.text())
        .then(data => {
            document.getElementById('searchResults').innerHTML = data;
        });
    });
</script>


  <!-- Pagination -->
    <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-center">
          <li class="page-item {% if knp_pagination.currentPageNumber == 1 %}disabled{% endif %}">
            <a class="page-link" href="{{ path('app_cours_index', {'page': knp_pagination.currentPageNumber - 1 }) }}" tabindex="-1"> < </a>
          </li>
          {% for page in 1..knp_pagination.pageCount %}
          <li class="page-item {% if page == knp_pagination.currentPageNumber %}active{% endif %}">
            <a class="page-link" href="{{ path('app_cours_index', {'page': page }) }}">{{ page }}</a>
          </li>
          {% endfor %}
          <li class="page-item {% if knp_pagination.currentPageNumber == knp_pagination.pageCount %}disabled{% endif %}">
            <a class="page-link" href="{{ path('app_cours_index', {'page': knp_pagination.currentPageNumber + 1 }) }}"> > </a>
          </li>
        </ul>
    </nav>
    <!-- End Pagination -->
 <!-- Add the following JavaScript code at the end of the body block -->
    <script>
        {% if app.request.query.get('success') %}
            alert('{{ app.request.query.get('success') }}');
        {% endif %}
    </script>
<a href="{{ path('app_cours_new') }}" class="btn btn-success">Créer un nouveau</a>{% endblock %}